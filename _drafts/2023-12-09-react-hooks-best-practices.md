---
title: React Hooks最佳实践
---

大纲先列一下。

本质上就是把面向对象那套东西搬到前端来治理复杂度，只不过在前端对象的形式不是类，而可以是更简单的函数而已（用类也是可以的，本质就是个原型继承的语法糖，但是函数作为JS一等公民还是更方便一些，可以闭包）。

* 最基本规则：`use`开头、不能动态调用（条件或循环下使用等）、依赖列表决定触发时机（为了配合React浅对比机制，麻烦）
* 复杂度治理：
  * 使用custom hook作为封装单元暴露功能。数据可以是直接传递给custom hook作为内闭包，也可以hooks自己从其他全局store（如redux、React Context等）中获取
  * 暴露行为，而非属性。这是OO最基本的封装要求。一个浅显的要求是，在React组件中只允许出现直接取值或`map`操作。
  * 出现了更复杂的行为`reduce`、`filter`、检查、交叉操作时，封装custom hooks
  * 使用React Query作为全局状态管理，避免了长组件函数列表 React props drilling
