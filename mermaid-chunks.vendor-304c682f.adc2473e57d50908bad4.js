"use strict";(self.webpackChunkethan_blog=self.webpackChunkethan_blog||[]).push([[671],{38500:(t,e,r)=>{r.d(e,{a:()=>o,b:()=>v,c:()=>c,d:()=>M,e:()=>R,f:()=>A,g:()=>$,h:()=>D,i:()=>f,l:()=>h,p:()=>T,s:()=>N,u:()=>d});var a=r(89252),i=r(27435),n=r(54503),s=r(2932);const l={extension:(t,e,r)=>{a.l.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},o=(t,e,r,a)=>{e.forEach((e=>{l[e](t,r,a)}))},c=(t,e,r,n)=>{let s=t||"";if("object"==typeof s&&(s=s[0]),(0,a.n)((0,a.c)().flowchart.htmlLabels)){return s=s.replace(/\\n|\n/g,"<br />"),a.l.info("vertexText"+s),function(t){const e=(0,i.Ys)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),a=t.label,n=t.isNode?"nodeLabel":"edgeLabel";var s;return r.html('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+a+"</span>"),(s=t.labelStyle)&&r.attr("style",s),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}({isNode:n,label:(0,a.I)(s).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:e.replace("fill:","color:")})}{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let a=[];a="string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[];for(const e of a){const a=document.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.setAttribute("dy","1em"),a.setAttribute("x","0"),r?a.setAttribute("class","title-row"):a.setAttribute("class","row"),a.textContent=e.trim(),t.appendChild(a)}return t}},h=async(t,e,r,s)=>{let l;const o=e.useHtmlLabels||(0,a.n)((0,a.c)().flowchart.htmlLabels);l=r||"node default";const h=t.insert("g").attr("class",l).attr("id",e.domId||e.id),d=h.insert("g").attr("class","label").attr("style",e.labelStyle);let p;p=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];const y=d.node();let u;u="markdown"===e.labelType?(0,n.c)(d,(0,a.d)((0,a.I)(p),(0,a.c)()),{useHtmlLabels:o,width:e.width||(0,a.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):y.appendChild(c((0,a.d)((0,a.I)(p),(0,a.c)()),e.labelStyle,!1,s));let g=u.getBBox();const f=e.padding/2;if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=u.children[0],e=(0,i.Ys)(u),r=t.getElementsByTagName("img");if(r){const t=""===p.replace(/<img[^>]*>/g,"").trim();await Promise.all([...r].map((e=>new Promise((r=>{function i(){if(e.style.display="flex",e.style.flexDirection="column",t){const t=(0,a.c)().fontSize?(0,a.c)().fontSize:window.getComputedStyle(document.body).fontSize,r=5;e.style.width=parseInt(t,10)*r+"px"}else e.style.width="100%";r(e)}setTimeout((()=>{e.complete&&i()})),e.addEventListener("error",i),e.addEventListener("load",i)})))))}g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}return o?d.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"):d.attr("transform","translate(0, "+-g.height/2+")"),e.centerLabel&&d.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),d.insert("rect",":first-child"),{shapeSvg:h,bbox:g,halfPadding:f,label:d}},d=(t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height};function p(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}function y(t,e,r,a){var i=t.x,n=t.y,s=i-a.x,l=n-a.y,o=Math.sqrt(e*e*l*l+r*r*s*s),c=Math.abs(e*r*s/o);a.x<i&&(c=-c);var h=Math.abs(e*r*l/o);return a.y<n&&(h=-h),{x:i+c,y:n+h}}function u(t,e,r,a){var i,n,s,l,o,c,h,d,p,y,u,f,b;if(i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,p=i*r.x+s*r.y+o,y=i*a.x+s*a.y+o,!(0!==p&&0!==y&&g(p,y)||(n=a.y-r.y,l=r.x-a.x,c=a.x*r.y-r.x*a.y,h=n*t.x+l*t.y+c,d=n*e.x+l*e.y+c,0!==h&&0!==d&&g(h,d)||0==(u=i*l-n*s))))return f=Math.abs(u/2),{x:(b=s*c-l*o)<0?(b-f)/u:(b+f)/u,y:(b=n*o-i*c)<0?(b-f)/u:(b+f)/u}}function g(t,e){return t*e>0}const f=(t,e)=>{var r,a,i=t.x,n=t.y,s=e.x-i,l=e.y-n,o=t.width/2,c=t.height/2;return Math.abs(l)*o>Math.abs(s)*c?(l<0&&(c=-c),r=0===l?0:c*s/l,a=c):(s<0&&(o=-o),r=o,a=0===s?0:o*l/s),{x:i+r,y:n+a}},b={node:function(t,e){return t.intersect(e)},circle:function(t,e,r){return y(t,e,e,r)},ellipse:y,polygon:function(t,e,r){var a=t.x,i=t.y,n=[],s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),l=Math.min(l,t.y)})):(s=Math.min(s,e.x),l=Math.min(l,e.y));for(var o=a-t.width/2-s,c=i-t.height/2-l,h=0;h<e.length;h++){var d=e[h],p=e[h<e.length-1?h+1:0],y=u(t,r,{x:o+d.x,y:c+d.y},{x:o+p.x,y:c+p.y});y&&n.push(y)}return n.length?(n.length>1&&n.sort((function(t,e){var a=t.x-r.x,i=t.y-r.y,n=Math.sqrt(a*a+i*i),s=e.x-r.x,l=e.y-r.y,o=Math.sqrt(s*s+l*l);return n<o?-1:n===o?0:1})),n[0]):t},rect:f},m=t=>t?" "+t:"",x=(t,e)=>`${e||"node default"}${m(t.classes)} ${m(t.class)}`,_=async(t,e)=>{const{shapeSvg:r,bbox:i}=await h(t,e,x(e,void 0),!0),n=i.width+e.padding+(i.height+e.padding),s=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}];a.l.info("Question main (Circle)");const l=p(r,n,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return a.l.warn("Intersect called"),b.polygon(e,s,t)},r};function k(t,e,r,i){const n=[],s=t=>{n.push(t,0)},l=t=>{n.push(0,t)};e.includes("t")?(a.l.debug("add top border"),s(r)):l(r),e.includes("r")?(a.l.debug("add right border"),s(i)):l(i),e.includes("b")?(a.l.debug("add bottom border"),s(r)):l(r),e.includes("l")?(a.l.debug("add left border"),s(i)):l(i),t.attr("stroke-dasharray",n.join(" "))}const w=(t,e,r)=>{const a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,n=10;"LR"===r&&(i=10,n=70);const s=a.append("rect").attr("x",-1*i/2).attr("y",-1*n/2).attr("width",i).attr("height",n).attr("class","fork-join");return d(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return b.rect(e,t)},a},E={rhombus:_,question:_,rect:async(t,e)=>{const{shapeSvg:r,bbox:i,halfPadding:n}=await h(t,e,"node "+e.classes+" "+e.class,!0),s=r.insert("rect",":first-child"),l=i.width+e.padding,o=i.height+e.padding;if(s.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",l).attr("height",o),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(k(s,e.props.borders,l,o),t.delete("borders")),t.forEach((t=>{a.l.warn(`Unknown node property ${t}`)}))}return d(e,s),e.intersect=function(t){return b.rect(e,t)},r},labelRect:async(t,e)=>{const{shapeSvg:r}=await h(t,e,"label",!0);a.l.trace("Classes = ",e.class);const i=r.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),r.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(k(i,e.props.borders,0,0),t.delete("borders")),t.forEach((t=>{a.l.warn(`Unknown node property ${t}`)}))}return d(e,i),e.intersect=function(t){return b.rect(e,t)},r},rectWithTitle:(t,e)=>{let r;r=e.classes?"node "+e.classes:"node default";const n=t.insert("g").attr("class",r).attr("id",e.domId||e.id),s=n.insert("rect",":first-child"),l=n.insert("line"),o=n.insert("g").attr("class","label"),h=e.labelText.flat?e.labelText.flat():e.labelText;let p="";p="object"==typeof h?h[0]:h,a.l.info("Label text abc79",p,h,"object"==typeof h);const y=o.node().appendChild(c(p,e.labelStyle,!0,!0));let u={width:0,height:0};if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=y.children[0],e=(0,i.Ys)(y);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}a.l.info("Text 2",h);const g=h.slice(1,h.length);let f=y.getBBox();const m=o.node().appendChild(c(g.join?g.join("<br/>"):g,e.labelStyle,!0,!0));if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=m.children[0],e=(0,i.Ys)(m);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}const x=e.padding/2;return(0,i.Ys)(m).attr("transform","translate( "+(u.width>f.width?0:(f.width-u.width)/2)+", "+(f.height+x+5)+")"),(0,i.Ys)(y).attr("transform","translate( "+(u.width<f.width?0:-(f.width-u.width)/2)+", 0)"),u=o.node().getBBox(),o.attr("transform","translate("+-u.width/2+", "+(-u.height/2-x+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-x).attr("y",-u.height/2-x).attr("width",u.width+e.padding).attr("height",u.height+e.padding),l.attr("class","divider").attr("x1",-u.width/2-x).attr("x2",u.width/2+x).attr("y1",-u.height/2-x+f.height+x).attr("y2",-u.height/2-x+f.height+x),d(e,s),e.intersect=function(t){return b.rect(e,t)},n},choice:(t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);return r.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return b.circle(e,14,t)},r},circle:async(t,e)=>{const{shapeSvg:r,bbox:i,halfPadding:n}=await h(t,e,x(e,void 0),!0),s=r.insert("circle",":first-child");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),a.l.info("Circle main"),d(e,s),e.intersect=function(t){return a.l.info("Circle intersect",e,i.width/2+n,t),b.circle(e,i.width/2+n,t)},r},doublecircle:async(t,e)=>{const{shapeSvg:r,bbox:i,halfPadding:n}=await h(t,e,x(e,void 0),!0),s=r.insert("g",":first-child"),l=s.insert("circle"),o=s.insert("circle");return s.attr("class",e.class),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n+5).attr("width",i.width+e.padding+10).attr("height",i.height+e.padding+10),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),a.l.info("DoubleCircle main"),d(e,l),e.intersect=function(t){return a.l.info("DoubleCircle intersect",e,i.width/2+n+5,t),b.circle(e,i.width/2+n+5,t)},r},stadium:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.height+e.padding,n=a.width+i/4+e.padding,s=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-n/2).attr("y",-i/2).attr("width",n).attr("height",i);return d(e,s),e.intersect=function(t){return b.rect(e,t)},r},hexagon:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.height+e.padding,n=i/4,s=a.width+2*n+e.padding,l=[{x:n,y:0},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}],o=p(r,s,i,l);return o.attr("style",e.style),d(e,o),e.intersect=function(t){return b.polygon(e,l,t)},r},rect_left_inv_arrow:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-n/2,y:0},{x:i,y:0},{x:i,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return p(r,i,n,s).attr("style",e.style),e.width=i+n,e.height=n,e.intersect=function(t){return b.polygon(e,s,t)},r},lean_right:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-2*n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:n/6,y:-n}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},lean_left:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:2*n/6,y:0},{x:i+n/6,y:0},{x:i-2*n/6,y:-n},{x:-n/6,y:-n}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},trapezoid:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-2*n/6,y:0},{x:i+2*n/6,y:0},{x:i-n/6,y:-n},{x:n/6,y:-n}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},inv_trapezoid:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:-2*n/6,y:-n}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},rect_right_inv_arrow:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:0,y:0},{x:i+n/2,y:0},{x:i,y:-n/2},{x:i+n/2,y:-n},{x:0,y:-n}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},cylinder:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=i/2,s=n/(2.5+i/50),l=a.height+s+e.padding,o="M 0,"+s+" a "+n+","+s+" 0,0,0 "+i+" 0 a "+n+","+s+" 0,0,0 "+-i+" 0 l 0,"+l+" a "+n+","+s+" 0,0,0 "+i+" 0 l 0,"+-l,c=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",o).attr("transform","translate("+-i/2+","+-(l/2+s)+")");return d(e,c),e.intersect=function(t){const r=b.rect(e,t),a=r.x-e.x;if(0!=n&&(Math.abs(a)<e.width/2||Math.abs(a)==e.width/2&&Math.abs(r.y-e.y)>e.height/2-s)){let i=s*s*(1-a*a/(n*n));0!=i&&(i=Math.sqrt(i)),i=s-i,t.y-e.y>0&&(i=-i),r.y+=i}return r},r},start:(t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),d(e,a),e.intersect=function(t){return b.circle(e,7,t)},r},end:(t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),d(e,i),e.intersect=function(t){return b.circle(e,7,t)},r},note:async(t,e)=>{e.useHtmlLabels||(0,a.c)().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:i,halfPadding:n}=await h(t,e,"node "+e.classes,!0);a.l.info("Classes = ",e.classes);const s=r.insert("rect",":first-child");return s.attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),d(e,s),e.intersect=function(t){return b.rect(e,t)},r},subroutine:async(t,e)=>{const{shapeSvg:r,bbox:a}=await h(t,e,x(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],l=p(r,i,n,s);return l.attr("style",e.style),d(e,l),e.intersect=function(t){return b.polygon(e,s,t)},r},fork:w,join:w,class_box:(t,e)=>{const r=e.padding/2;let n;n=e.classes?"node "+e.classes:"node default";const l=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=l.insert("rect",":first-child"),h=l.insert("line"),p=l.insert("line");let y=0,u=4;const g=l.insert("g").attr("class","label");let f=0;const m=e.classData.annotations&&e.classData.annotations[0],x=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",_=g.node().appendChild(c(x,e.labelStyle,!0,!0));let k=_.getBBox();if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=_.children[0],e=(0,i.Ys)(_);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}e.classData.annotations[0]&&(u+=k.height+4,y+=k.width);let w=e.classData.label;void 0!==e.classData.type&&""!==e.classData.type&&((0,a.c)().flowchart.htmlLabels?w+="&lt;"+e.classData.type+"&gt;":w+="<"+e.classData.type+">");const E=g.node().appendChild(c(w,e.labelStyle,!0,!0));(0,i.Ys)(E).attr("class","classTitle");let O=E.getBBox();if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=E.children[0],e=(0,i.Ys)(E);O=t.getBoundingClientRect(),e.attr("width",O.width),e.attr("height",O.height)}u+=O.height+4,O.width>y&&(y=O.width);const R=[];e.classData.members.forEach((t=>{const r=(0,s.p)(t);let n=r.displayText;(0,a.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const l=g.node().appendChild(c(n,r.cssStyle?r.cssStyle:e.labelStyle,!0,!0));let o=l.getBBox();if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=l.children[0],e=(0,i.Ys)(l);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}o.width>y&&(y=o.width),u+=o.height+4,R.push(l)})),u+=8;const N=[];if(e.classData.methods.forEach((t=>{const r=(0,s.p)(t);let n=r.displayText;(0,a.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const l=g.node().appendChild(c(n,r.cssStyle?r.cssStyle:e.labelStyle,!0,!0));let o=l.getBBox();if((0,a.n)((0,a.c)().flowchart.htmlLabels)){const t=l.children[0],e=(0,i.Ys)(l);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}o.width>y&&(y=o.width),u+=o.height+4,N.push(l)})),u+=8,m){let t=(y-k.width)/2;(0,i.Ys)(_).attr("transform","translate( "+(-1*y/2+t)+", "+-1*u/2+")"),f=k.height+4}let v=(y-O.width)/2;return(0,i.Ys)(E).attr("transform","translate( "+(-1*y/2+v)+", "+(-1*u/2+f)+")"),f+=O.height+4,h.attr("class","divider").attr("x1",-y/2-r).attr("x2",y/2+r).attr("y1",-u/2-r+8+f).attr("y2",-u/2-r+8+f),f+=8,R.forEach((t=>{(0,i.Ys)(t).attr("transform","translate( "+-y/2+", "+(-1*u/2+f+4)+")");const e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4})),f+=8,p.attr("class","divider").attr("x1",-y/2-r).attr("x2",y/2+r).attr("y1",-u/2-r+8+f).attr("y2",-u/2-r+8+f),f+=8,N.forEach((t=>{(0,i.Ys)(t).attr("transform","translate( "+-y/2+", "+(-1*u/2+f)+")");const e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4})),o.attr("class","outer title-state").attr("x",-y/2-r).attr("y",-u/2-r).attr("width",y+e.padding).attr("height",u+e.padding),d(e,o),e.intersect=function(t){return b.rect(e,t)},l}};let O={};const R=async(t,e,r)=>{let i,n;if(e.link){let s;"sandbox"===(0,a.c)().securityLevel?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s),n=await E[e.shape](i,e,r)}else n=await E[e.shape](t,e,r),i=n;return e.tooltip&&n.attr("title",e.tooltip),e.class&&n.attr("class","node default "+e.class),O[e.id]=i,e.haveCallback&&O[e.id].attr("class",O[e.id].attr("class")+" clickable"),i},N=(t,e)=>{O[e.id]=t},v=()=>{O={}},T=t=>{const e=O[t.id];a.l.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r};let L={},S={};const M=()=>{L={},S={}},A=(t,e)=>{const r=(0,a.n)((0,a.c)().flowchart.htmlLabels),s="markdown"===e.labelType?(0,n.c)(t,e.label,{style:e.labelStyle,useHtmlLabels:r,addSvgBackground:!0}):c(e.label,e.labelStyle);a.l.info("abc82",e,e.labelType);const l=t.insert("g").attr("class","edgeLabel"),o=l.insert("g").attr("class","label");o.node().appendChild(s);let h,d=s.getBBox();if(r){const t=s.children[0],e=(0,i.Ys)(s);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}if(o.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),L[e.id]=l,e.width=d.width,e.height=d.height,e.startLabelLeft){const r=c(e.startLabelLeft,e.labelStyle),a=t.insert("g").attr("class","edgeTerminals"),i=a.insert("g").attr("class","inner");h=i.node().appendChild(r);const n=r.getBBox();i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),S[e.id]||(S[e.id]={}),S[e.id].startLeft=a,B(h,e.startLabelLeft)}if(e.startLabelRight){const r=c(e.startLabelRight,e.labelStyle),a=t.insert("g").attr("class","edgeTerminals"),i=a.insert("g").attr("class","inner");h=a.node().appendChild(r),i.node().appendChild(r);const n=r.getBBox();i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),S[e.id]||(S[e.id]={}),S[e.id].startRight=a,B(h,e.startLabelRight)}if(e.endLabelLeft){const r=c(e.endLabelLeft,e.labelStyle),a=t.insert("g").attr("class","edgeTerminals"),i=a.insert("g").attr("class","inner");h=i.node().appendChild(r);const n=r.getBBox();i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),a.node().appendChild(r),S[e.id]||(S[e.id]={}),S[e.id].endLeft=a,B(h,e.endLabelLeft)}if(e.endLabelRight){const r=c(e.endLabelRight,e.labelStyle),a=t.insert("g").attr("class","edgeTerminals"),i=a.insert("g").attr("class","inner");h=i.node().appendChild(r);const n=r.getBBox();i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),a.node().appendChild(r),S[e.id]||(S[e.id]={}),S[e.id].endRight=a,B(h,e.endLabelRight)}return s};function B(t,e){(0,a.c)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const D=(t,e)=>{a.l.info("Moving label abc78 ",t.id,t.label,L[t.id]);let r=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const i=L[t.id];let n=t.x,s=t.y;if(r){const i=a.u.calcLabelPosition(r);a.l.info("Moving label "+t.label+" from (",n,",",s,") to (",i.x,",",i.y,") abc78"),e.updatedPath&&(n=i.x,s=i.y)}i.attr("transform","translate("+n+", "+s+")")}if(t.startLabelLeft){const e=S[t.id].startLeft;let i=t.x,n=t.y;if(r){const e=a.u.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);i=e.x,n=e.y}e.attr("transform","translate("+i+", "+n+")")}if(t.startLabelRight){const e=S[t.id].startRight;let i=t.x,n=t.y;if(r){const e=a.u.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);i=e.x,n=e.y}e.attr("transform","translate("+i+", "+n+")")}if(t.endLabelLeft){const e=S[t.id].endLeft;let i=t.x,n=t.y;if(r){const e=a.u.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);i=e.x,n=e.y}e.attr("transform","translate("+i+", "+n+")")}if(t.endLabelRight){const e=S[t.id].endRight;let i=t.x,n=t.y;if(r){const e=a.u.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);i=e.x,n=e.y}e.attr("transform","translate("+i+", "+n+")")}},I=(t,e)=>{a.l.warn("abc88 cutPathAtIntersect",t,e);let r=[],i=t[0],n=!1;return t.forEach((t=>{if(a.l.info("abc88 checking point",t,e),((t,e)=>{const r=t.x,a=t.y,i=Math.abs(e.x-r),n=Math.abs(e.y-a),s=t.width/2,l=t.height/2;return i>=s||n>=l})(e,t)||n)a.l.warn("abc88 outside",t,i),i=t,n||r.push(t);else{const s=((t,e,r)=>{a.l.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(r)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const i=t.x,n=t.y,s=Math.abs(i-r.x),l=t.width/2;let o=r.x<e.x?l-s:l+s;const c=t.height/2,h=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*l>Math.abs(i-e.x)*c){let t=r.y<e.y?e.y-c-n:n-c-e.y;o=d*t/h;const i={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+h-t:r.y-h+t};return 0===o&&(i.x=e.x,i.y=e.y),0===d&&(i.x=e.x),0===h&&(i.y=e.y),a.l.warn(`abc89 topp/bott calc, Q ${h}, q ${t}, R ${d}, r ${o}`,i),i}{o=r.x<e.x?e.x-l-i:i-l-e.x;let t=h*o/d,n=r.x<e.x?r.x+d-o:r.x-d+o,s=r.y<e.y?r.y+t:r.y-t;return a.l.warn(`sides calc abc89, Q ${h}, q ${t}, R ${d}, r ${o}`,{_x:n,_y:s}),0===o&&(n=e.x,s=e.y),0===d&&(n=e.x),0===h&&(s=e.y),{x:n,y:s}}})(e,i,t);a.l.warn("abc88 inside",t,i,s),a.l.warn("abc88 intersection",s);let l=!1;r.forEach((t=>{l=l||t.x===s.x&&t.y===s.y})),r.some((t=>t.x===s.x&&t.y===s.y))?a.l.warn("abc88 no intersect",s,r):r.push(s),n=!0}})),a.l.warn("abc88 returning points",r),r},$=function(t,e,r,n,s,l){let o=r.points,c=!1;const h=l.node(e.v);var d=l.node(e.w);a.l.info("abc88 InsertEdge: ",r),d.intersect&&h.intersect&&(o=o.slice(1,r.points.length-1),o.unshift(h.intersect(o[0])),a.l.info("Last point",o[o.length-1],d,d.intersect(o[o.length-1])),o.push(d.intersect(o[o.length-1]))),r.toCluster&&(a.l.info("to cluster abc88",n[r.toCluster]),o=I(r.points,n[r.toCluster].node),c=!0),r.fromCluster&&(a.l.info("from cluster abc88",n[r.fromCluster]),o=I(o.reverse(),n[r.fromCluster].node).reverse(),c=!0);const p=o.filter((t=>!Number.isNaN(t.y)));let y;y=("graph"===s||"flowchart"===s)&&r.curve||i.$0Z;const u=(0,i.jvg)().x((function(t){return t.x})).y((function(t){return t.y})).curve(y);let g;switch(r.thickness){case"normal":g="edge-thickness-normal";break;case"thick":case"invisible":g="edge-thickness-thick";break;default:g=""}switch(r.pattern){case"solid":g+=" edge-pattern-solid";break;case"dotted":g+=" edge-pattern-dotted";break;case"dashed":g+=" edge-pattern-dashed"}const f=t.append("path").attr("d",u(p)).attr("id",r.id).attr("class"," "+g+(r.classes?" "+r.classes:"")).attr("style",r.style);let b="";switch(((0,a.c)().flowchart.arrowMarkerAbsolute||(0,a.c)().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),a.l.info("arrowTypeStart",r.arrowTypeStart),a.l.info("arrowTypeEnd",r.arrowTypeEnd),r.arrowTypeStart){case"arrow_cross":f.attr("marker-start","url("+b+"#"+s+"-crossStart)");break;case"arrow_point":f.attr("marker-start","url("+b+"#"+s+"-pointStart)");break;case"arrow_barb":f.attr("marker-start","url("+b+"#"+s+"-barbStart)");break;case"arrow_circle":f.attr("marker-start","url("+b+"#"+s+"-circleStart)");break;case"aggregation":f.attr("marker-start","url("+b+"#"+s+"-aggregationStart)");break;case"extension":f.attr("marker-start","url("+b+"#"+s+"-extensionStart)");break;case"composition":f.attr("marker-start","url("+b+"#"+s+"-compositionStart)");break;case"dependency":f.attr("marker-start","url("+b+"#"+s+"-dependencyStart)");break;case"lollipop":f.attr("marker-start","url("+b+"#"+s+"-lollipopStart)")}switch(r.arrowTypeEnd){case"arrow_cross":f.attr("marker-end","url("+b+"#"+s+"-crossEnd)");break;case"arrow_point":f.attr("marker-end","url("+b+"#"+s+"-pointEnd)");break;case"arrow_barb":f.attr("marker-end","url("+b+"#"+s+"-barbEnd)");break;case"arrow_circle":f.attr("marker-end","url("+b+"#"+s+"-circleEnd)");break;case"aggregation":f.attr("marker-end","url("+b+"#"+s+"-aggregationEnd)");break;case"extension":f.attr("marker-end","url("+b+"#"+s+"-extensionEnd)");break;case"composition":f.attr("marker-end","url("+b+"#"+s+"-compositionEnd)");break;case"dependency":f.attr("marker-end","url("+b+"#"+s+"-dependencyEnd)");break;case"lollipop":f.attr("marker-end","url("+b+"#"+s+"-lollipopEnd)")}let m={};return c&&(m.updatedPath=o),m.originalPath=r.points,m}},5404:(t,e,r)=>{r.r(e),r.d(e,{diagram:()=>E});var a=r(89252),i=r(42521),n=r(27435),s=r(96752),l=r(73830),o=(r(67006),r(91088),r(65165),function(){var t=function(t,e,r,a){for(r=r||{},a=t.length;a--;r[t[a]]=e);return r},e=[1,2],r=[1,5],a=[6,9,11,23,25,27,29,30,31,52],i=[1,17],n=[1,18],s=[1,19],l=[1,20],o=[1,21],c=[1,22],h=[1,25],d=[1,30],p=[1,31],y=[1,32],u=[1,33],g=[1,34],f=[6,9,11,15,20,23,25,27,29,30,31,44,45,46,47,48,52],b=[1,46],m=[30,31,49,50],x=[4,6,9,11,23,25,27,29,30,31,52],_=[44,45,46,47,48],k=[22,37],w=[1,66],E=[1,65],O=[22,37,39,41],R={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyTypeList:35,attributeComment:36,ATTRIBUTE_WORD:37,attributeKeyType:38,COMMA:39,ATTRIBUTE_KEY:40,COMMENT:41,cardinality:42,relType:43,ZERO_OR_ONE:44,ZERO_OR_MORE:45,ONE_OR_MORE:46,ONLY_ONE:47,MD_PARENT:48,NON_IDENTIFYING:49,IDENTIFYING:50,WORD:51,open_directive:52,type_directive:53,arg_directive:54,close_directive:55,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",39:"COMMA",40:"ATTRIBUTE_KEY",41:"COMMENT",44:"ZERO_OR_ONE",45:"ZERO_OR_MORE",46:"ONE_OR_MORE",47:"ONLY_ONE",48:"MD_PARENT",49:"NON_IDENTIFYING",50:"IDENTIFYING",51:"WORD",52:"open_directive",53:"type_directive",54:"arg_directive",55:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[35,3],[38,1],[36,1],[18,3],[42,1],[42,1],[42,1],[42,1],[42,1],[43,1],[43,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,r,a,i,n,s){var l=n.length-1;switch(i){case 1:break;case 3:case 7:case 8:this.$=[];break;case 4:n[l-1].push(n[l]),this.$=n[l-1];break;case 5:case 6:case 20:case 44:case 28:case 29:case 32:this.$=n[l];break;case 12:a.addEntity(n[l-4]),a.addEntity(n[l-2]),a.addRelationship(n[l-4],n[l],n[l-2],n[l-3]);break;case 13:a.addEntity(n[l-3]),a.addAttributes(n[l-3],n[l-1]);break;case 14:a.addEntity(n[l-2]);break;case 15:a.addEntity(n[l]);break;case 16:case 17:this.$=n[l].trim(),a.setAccTitle(this.$);break;case 18:case 19:this.$=n[l].trim(),a.setAccDescription(this.$);break;case 21:case 42:case 43:case 33:this.$=n[l].replace(/"/g,"");break;case 22:case 30:this.$=[n[l]];break;case 23:n[l].push(n[l-1]),this.$=n[l];break;case 24:this.$={attributeType:n[l-1],attributeName:n[l]};break;case 25:this.$={attributeType:n[l-2],attributeName:n[l-1],attributeKeyTypeList:n[l]};break;case 26:this.$={attributeType:n[l-2],attributeName:n[l-1],attributeComment:n[l]};break;case 27:this.$={attributeType:n[l-3],attributeName:n[l-2],attributeKeyTypeList:n[l-1],attributeComment:n[l]};break;case 31:n[l-2].push(n[l]),this.$=n[l-2];break;case 34:this.$={cardA:n[l],relType:n[l-1],cardB:n[l-2]};break;case 35:this.$=a.Cardinality.ZERO_OR_ONE;break;case 36:this.$=a.Cardinality.ZERO_OR_MORE;break;case 37:this.$=a.Cardinality.ONE_OR_MORE;break;case 38:this.$=a.Cardinality.ONLY_ONE;break;case 39:this.$=a.Cardinality.MD_PARENT;break;case 40:this.$=a.Identification.NON_IDENTIFYING;break;case 41:this.$=a.Identification.IDENTIFYING;break;case 45:a.parseDirective("%%{","open_directive");break;case 46:a.parseDirective(n[l],"type_directive");break;case 47:n[l]=n[l].trim().replace(/'/g,'"'),a.parseDirective(n[l],"arg_directive");break;case 48:a.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:e,7:3,12:4,52:r},{1:[3]},t(a,[2,3],{5:6}),{3:7,4:e,7:3,12:4,52:r},{13:8,53:[1,9]},{53:[2,45]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:i,25:n,27:s,29:l,30:o,31:c,52:r},{1:[2,2]},{14:23,15:[1,24],55:h},t([15,55],[2,46]),t(a,[2,8],{1:[2,1]}),t(a,[2,4]),{7:15,10:26,12:4,17:16,23:i,25:n,27:s,29:l,30:o,31:c,52:r},t(a,[2,6]),t(a,[2,7]),t(a,[2,11]),t(a,[2,15],{18:27,42:29,20:[1,28],44:d,45:p,46:y,47:u,48:g}),{24:[1,35]},{26:[1,36]},{28:[1,37]},t(a,[2,19]),t(f,[2,20]),t(f,[2,21]),{11:[1,38]},{16:39,54:[1,40]},{11:[2,48]},t(a,[2,5]),{17:41,30:o,31:c},{21:42,22:[1,43],32:44,33:45,37:b},{43:47,49:[1,48],50:[1,49]},t(m,[2,35]),t(m,[2,36]),t(m,[2,37]),t(m,[2,38]),t(m,[2,39]),t(a,[2,16]),t(a,[2,17]),t(a,[2,18]),t(x,[2,9]),{14:50,55:h},{55:[2,47]},{15:[1,51]},{22:[1,52]},t(a,[2,14]),{21:53,22:[2,22],32:44,33:45,37:b},{34:54,37:[1,55]},{37:[2,28]},{42:56,44:d,45:p,46:y,47:u,48:g},t(_,[2,40]),t(_,[2,41]),{11:[1,57]},{19:58,30:[1,61],31:[1,60],51:[1,59]},t(a,[2,13]),{22:[2,23]},t(k,[2,24],{35:62,36:63,38:64,40:w,41:E}),t([22,37,40,41],[2,29]),t([30,31],[2,34]),t(x,[2,10]),t(a,[2,12]),t(a,[2,42]),t(a,[2,43]),t(a,[2,44]),t(k,[2,25],{36:67,39:[1,68],41:E}),t(k,[2,26]),t(O,[2,30]),t(k,[2,33]),t(O,[2,32]),t(k,[2,27]),{38:69,40:w},t(O,[2,31])],defaultActions:{5:[2,45],7:[2,2],25:[2,48],40:[2,47],46:[2,28],53:[2,23]},parseError:function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)},parse:function(t){var e=[0],r=[],a=[null],i=[],n=this.table,s="",l=0,o=0,c=i.slice.call(arguments,1),h=Object.create(this.lexer),d={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(d.yy[p]=this.yy[p]);h.setInput(t,d.yy),d.yy.lexer=h,d.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var y=h.yylloc;i.push(y);var u=h.options&&h.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,f,b,m,x,_,k,w,E,O={};;){if(f=e[e.length-1],this.defaultActions[f]?b=this.defaultActions[f]:(null==g&&(E=void 0,"number"!=typeof(E=r.pop()||h.lex()||1)&&(E instanceof Array&&(E=(r=E).pop()),E=this.symbols_[E]||E),g=E),b=n[f]&&n[f][g]),void 0===b||!b.length||!b[0]){var R;for(x in w=[],n[f])this.terminals_[x]&&x>2&&w.push("'"+this.terminals_[x]+"'");R=h.showPosition?"Parse error on line "+(l+1)+":\n"+h.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(R,{text:h.match,token:this.terminals_[g]||g,line:h.yylineno,loc:y,expected:w})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+g);switch(b[0]){case 1:e.push(g),a.push(h.yytext),i.push(h.yylloc),e.push(b[1]),g=null,o=h.yyleng,s=h.yytext,l=h.yylineno,y=h.yylloc;break;case 2:if(_=this.productions_[b[1]][1],O.$=a[a.length-_],O._$={first_line:i[i.length-(_||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(_||1)].first_column,last_column:i[i.length-1].last_column},u&&(O._$.range=[i[i.length-(_||1)].range[0],i[i.length-1].range[1]]),void 0!==(m=this.performAction.apply(O,[s,o,l,d.yy,b[1],a,i].concat(c))))return m;_&&(e=e.slice(0,-1*_*2),a=a.slice(0,-1*_),i=i.slice(0,-1*_)),e.push(this.productions_[b[1]][0]),a.push(O.$),i.push(O._$),k=n[e[e.length-2]][e[e.length-1]],e.push(k);break;case 3:return!0}}return!0}},N={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===a.length?this.yylloc.first_column:0)+a[a.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,a,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(a=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in i)this[n]=i[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,a;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),n=0;n<i.length;n++)if((r=this._input.match(this.rules[i[n]]))&&(!e||r[0].length>e[0].length)){if(e=r,a=n,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[n])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[a]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,a){switch(r){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),52;case 8:return this.begin("type_directive"),53;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),55;case 11:return 54;case 12:return 11;case 13:case 20:case 25:break;case 14:return 9;case 15:return 31;case 16:return 51;case 17:return 4;case 18:return this.begin("block"),20;case 19:return 39;case 21:return 40;case 22:case 23:return 37;case 24:return 41;case 26:return this.popState(),22;case 27:case 57:return e.yytext[0];case 28:case 32:case 33:case 46:return 44;case 29:case 30:case 31:case 39:case 41:case 48:return 46;case 34:case 35:case 36:case 37:case 38:case 40:case 47:return 45;case 42:case 43:case 44:case 45:return 47;case 49:return 48;case 50:case 53:case 54:case 55:return 49;case 51:case 52:return 50;case 56:return 30;case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[19,20,21,22,23,24,25,26,27],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};function v(){this.yy={}}return R.lexer=N,v.prototype=R,R.Parser=v,new v}());o.parser=o;const c=o;let h={},d=[];const p=function(t){return void 0===h[t]&&(h[t]={attributes:[]},a.l.info("Added new entity :",t)),h[t]},y={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,r){a.m.parseDirective(this,t,e,r)},getConfig:()=>(0,a.c)().er,addEntity:p,addAttributes:function(t,e){let r,i=p(t);for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),a.l.debug("Added attribute ",e[r].attributeName)},getEntities:()=>h,addRelationship:function(t,e,r,i){let n={entityA:t,roleA:e,entityB:r,relSpec:i};d.push(n),a.l.debug("Added new relationship :",n)},getRelationships:()=>d,clear:function(){h={},d=[],(0,a.v)()},setAccTitle:a.s,getAccTitle:a.g,setAccDescription:a.b,getAccDescription:a.a,setDiagramTitle:a.r,getDiagramTitle:a.t},u={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},g=u,f=/[^\dA-Za-z](\W)*/g;let b={},m=new Map;const x=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")};let _=0;const k="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function w(t=""){return t.length>0?`${t}-`:""}const E={parser:c,db:y,renderer:{setConf:function(t){const e=Object.keys(t);for(const r of e)b[r]=t[r]},draw:function(t,e,r,o){b=(0,a.c)().er,a.l.info("Drawing ER diagram");const c=(0,a.c)().securityLevel;let h;"sandbox"===c&&(h=(0,n.Ys)("#i"+e));const d=("sandbox"===c?(0,n.Ys)(h.nodes()[0].contentDocument.body):(0,n.Ys)("body")).select(`[id='${e}']`);let p;(function(t,e){let r;t.append("defs").append("marker").attr("id",u.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",u.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",u.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",u.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),r=t.append("defs").append("marker").attr("id",u.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),r=t.append("defs").append("marker").attr("id",u.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",u.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",u.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),r=t.append("defs").append("marker").attr("id",u.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),r=t.append("defs").append("marker").attr("id",u.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")})(d,b),p=new i.k({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:b.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel((function(){return{}}));const y=function(t,e,r){let i;return Object.keys(e).forEach((function(n){const s=function(t="",e=""){const r=t.replace(f,"");return`${w(e)}${w(r)}${(0,l.Z)(t,k)}`}(n,"entity");m.set(n,s);const o=t.append("g").attr("id",s);i=void 0===i?s:i;const c="text-"+s,h=o.append("text").classed("er entityLabel",!0).attr("id",c).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",(0,a.c)().fontFamily).style("font-size",b.fontSize+"px").text(n),{width:d,height:p}=((t,e,r)=>{const i=b.entityPadding/3,n=b.entityPadding/3,s=.85*b.fontSize,l=e.node().getBBox(),o=[];let c=!1,h=!1,d=0,p=0,y=0,u=0,g=l.height+2*i,f=1;r.forEach((t=>{void 0!==t.attributeKeyTypeList&&t.attributeKeyTypeList.length>0&&(c=!0),void 0!==t.attributeComment&&(h=!0)})),r.forEach((r=>{const n=`${e.node().id}-attr-${f}`;let l=0;const b=(0,a.x)(r.attributeType),m=t.append("text").classed("er entityLabel",!0).attr("id",`${n}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",(0,a.c)().fontFamily).style("font-size",s+"px").text(b),x=t.append("text").classed("er entityLabel",!0).attr("id",`${n}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",(0,a.c)().fontFamily).style("font-size",s+"px").text(r.attributeName),_={};_.tn=m,_.nn=x;const k=m.node().getBBox(),w=x.node().getBBox();if(d=Math.max(d,k.width),p=Math.max(p,w.width),l=Math.max(k.height,w.height),c){const e=void 0!==r.attributeKeyTypeList?r.attributeKeyTypeList.join(","):"",i=t.append("text").classed("er entityLabel",!0).attr("id",`${n}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",(0,a.c)().fontFamily).style("font-size",s+"px").text(e);_.kn=i;const o=i.node().getBBox();y=Math.max(y,o.width),l=Math.max(l,o.height)}if(h){const e=t.append("text").classed("er entityLabel",!0).attr("id",`${n}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",(0,a.c)().fontFamily).style("font-size",s+"px").text(r.attributeComment||"");_.cn=e;const i=e.node().getBBox();u=Math.max(u,i.width),l=Math.max(l,i.height)}_.height=l,o.push(_),g+=l+2*i,f+=1}));let m=4;c&&(m+=2),h&&(m+=2);const x=d+p+y+u,_={width:Math.max(b.minEntityWidth,Math.max(l.width+2*b.entityPadding,x+n*m)),height:r.length>0?g:Math.max(b.minEntityHeight,l.height+2*b.entityPadding)};if(r.length>0){const r=Math.max(0,(_.width-x-n*m)/(m/2));e.attr("transform","translate("+_.width/2+","+(i+l.height/2)+")");let a=l.height+2*i,s="attributeBoxOdd";o.forEach((e=>{const l=a+i+e.height/2;e.tn.attr("transform","translate("+n+","+l+")");const o=t.insert("rect","#"+e.tn.node().id).classed(`er ${s}`,!0).attr("x",0).attr("y",a).attr("width",d+2*n+r).attr("height",e.height+2*i),g=parseFloat(o.attr("x"))+parseFloat(o.attr("width"));e.nn.attr("transform","translate("+(g+n)+","+l+")");const f=t.insert("rect","#"+e.nn.node().id).classed(`er ${s}`,!0).attr("x",g).attr("y",a).attr("width",p+2*n+r).attr("height",e.height+2*i);let b=parseFloat(f.attr("x"))+parseFloat(f.attr("width"));if(c){e.kn.attr("transform","translate("+(b+n)+","+l+")");const o=t.insert("rect","#"+e.kn.node().id).classed(`er ${s}`,!0).attr("x",b).attr("y",a).attr("width",y+2*n+r).attr("height",e.height+2*i);b=parseFloat(o.attr("x"))+parseFloat(o.attr("width"))}h&&(e.cn.attr("transform","translate("+(b+n)+","+l+")"),t.insert("rect","#"+e.cn.node().id).classed(`er ${s}`,"true").attr("x",b).attr("y",a).attr("width",u+2*n+r).attr("height",e.height+2*i)),a+=e.height+2*i,s="attributeBoxOdd"===s?"attributeBoxEven":"attributeBoxOdd"}))}else _.height=Math.max(b.minEntityHeight,g),e.attr("transform","translate("+_.width/2+","+_.height/2+")");return _})(o,h,e[n].attributes),y=o.insert("rect","#"+c).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",d).attr("height",p).node().getBBox();r.setNode(s,{width:y.width,height:y.height,shape:"rect",id:s})})),i}(d,o.db.getEntities(),p),E=function(t,e){return t.forEach((function(t){e.setEdge(m.get(t.entityA),m.get(t.entityB),{relationship:t},x(t))})),t}(o.db.getRelationships(),p);var O,R;(0,s.bK)(p),O=d,(R=p).nodes().forEach((function(t){void 0!==t&&void 0!==R.node(t)&&O.select("#"+t).attr("transform","translate("+(R.node(t).x-R.node(t).width/2)+","+(R.node(t).y-R.node(t).height/2)+" )")})),E.forEach((function(t){!function(t,e,r,i,s){_++;const l=r.edge(m.get(e.entityA),m.get(e.entityB),x(e)),o=(0,n.jvg)().x((function(t){return t.x})).y((function(t){return t.y})).curve(n.$0Z),c=t.insert("path","#"+i).classed("er relationshipLine",!0).attr("d",o(l.points)).style("stroke",b.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&c.attr("stroke-dasharray","8,8");let h="";switch(b.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:c.attr("marker-end","url("+h+"#"+g.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:c.attr("marker-end","url("+h+"#"+g.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:c.attr("marker-end","url("+h+"#"+g.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:c.attr("marker-end","url("+h+"#"+g.ONLY_ONE_END+")");break;case s.db.Cardinality.MD_PARENT:c.attr("marker-end","url("+h+"#"+g.MD_PARENT_END+")")}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:c.attr("marker-start","url("+h+"#"+g.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:c.attr("marker-start","url("+h+"#"+g.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:c.attr("marker-start","url("+h+"#"+g.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:c.attr("marker-start","url("+h+"#"+g.ONLY_ONE_START+")");break;case s.db.Cardinality.MD_PARENT:c.attr("marker-start","url("+h+"#"+g.MD_PARENT_START+")")}const d=c.node().getTotalLength(),p=c.node().getPointAtLength(.5*d),y="rel"+_,u=t.append("text").classed("er relationshipLabel",!0).attr("id",y).attr("x",p.x).attr("y",p.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",(0,a.c)().fontFamily).style("font-size",b.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+y).classed("er relationshipLabelBox",!0).attr("x",p.x-u.width/2).attr("y",p.y-u.height/2).attr("width",u.width).attr("height",u.height)}(d,t,p,y,o)}));const N=b.diagramPadding;a.u.insertTitle(d,"entityTitleText",b.titleTopMargin,o.db.getDiagramTitle());const v=d.node().getBBox(),T=v.width+2*N,L=v.height+2*N;(0,a.i)(d,L,T,b.useMaxWidth),d.attr("viewBox",`${v.x-N} ${v.y-N} ${T} ${L}`)}},styles:t=>`\n  .entityBox {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: ${t.attributeBackgroundColorOdd};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill:  ${t.attributeBackgroundColorEven};\n    stroke: ${t.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${t.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${t.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${t.lineColor};\n    }\n\n  .entityTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }    \n  #MD_PARENT_START {\n    fill: #f5f5f5 !important;\n    stroke: ${t.lineColor} !important;\n    stroke-width: 1;\n  }\n  #MD_PARENT_END {\n    fill: #f5f5f5 !important;\n    stroke: ${t.lineColor} !important;\n    stroke-width: 1;\n  }\n  \n`}}}]);