---
title: TDD大法好
category: TDD
---

这是我在TWI做的一期3分钟闪电演讲：在数字化时代，为什么TDD仍然是敏捷开发的正知正念。

## 为什么必须有自动化测试

正如我在[React单元测试策略及落地](https://ethan.thoughtworkers.me/#/post/2018-07-13-react-unit-testing-strategy)一文中所说，数字化时代的商业软件开发具有VUCA的特点：易变、不确定、复杂、模糊的特点。那么为了应对不确定性，缩短反馈周期是一个自然的思路。而缩短反馈周期的办法有小迭代、框定高价值的MVP快速上线、简单设计等，于是我们看到许多方法论如敏捷、Scrum、XP、精益都在通过类似的思路缩短反馈周期。这背后是企业对IT响应力的诉求：通过更频繁的部署上线获取用户反馈，缩短反馈周期，更快速地做实验并根据用户反馈调整产品，进而在商业竞争中获得竞争力。企业对软件高响应力的诉求，最终会转化到对高质量的诉求上，而传统的手工测试方法是对高质量的阻碍。

Scrum是一个符合敏捷价值观和原则的管理方法，它鲜明地提出迭代和全功能团队的概念，并通过制定沟通计划帮助团队形成快速反馈的节奏。它是一套管理实践。毫无疑问，Scrum的短迭代对于提升响应力是很有帮助的。但是作为中国IT从业人员，我们很容易过度依赖管理上的实践，而不去深入技术实践。这体现在我们仍然缺乏拆分任务的技巧、不做自动化测试、缺乏有效的自动化测试，而是仍然依赖于一个独立的测试部门或全功能团队中的QA这个角色来做手工回归以保障软件质量。很快，随着时间流逝，项目业务变得更加繁杂、人员的流动开始带走上下文——而这两件事情在商业时代的软件项目上一定会发生——开始没有人能同时了解所有的业务，做一次完整的回归测试成本越来越高，没有被手工测试兜住的bug越来越多，质量问题变得更加严重，除了新的需求团队开始疲于应付优先级越来越高的线上问题，业务部门和用户对IT团队的不信任逐渐累积……然后，团队的迭代就永远停留在2周-4周，项目积重难返，再也无力往前快速推进。

所以我要说，不做以TDD、重构、CI这些核心的技术实践，仅凭管理实践无法从根本上提升质量、提升IT响应力。可靠、频繁的重构依赖于有效的自动化测试，CI需要有可靠的自动化测试运行在上面，而TDD则是产出可靠的自动化测试的唯一办法。

## 为什么TDD是产出有效自动化测试的唯一办法

上面说的场景和好处，其实都是自动化测试带来的，而不必然是TDD（测试👉🏻先行👈🏻）带来的好处。所以很多同学自然会问，我可不可以不做TDD，同样也能获得自动化测试带来的好处？

回答是不可以。因为自动化测试有无效的自动化测试和有效的自动化测试的差别。不采用测试先行也即是TDD的方式，很难产出质量内建（quality built-in）的、有效的自动化测试。

什么是有效的自动化测试？一个是能支持重构、一个是富有业务表达力。

## 如何练习TDD
