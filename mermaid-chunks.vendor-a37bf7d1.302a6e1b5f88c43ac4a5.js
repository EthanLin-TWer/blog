"use strict";(self.webpackChunkethan_blog=self.webpackChunkethan_blog||[]).push([[5487],{79657:(t,e,n)=>{n.r(e),n.d(e,{diagram:()=>h});var a=n(59100),r=n(27435),o=n(54746),i=n(42521),l=n(89252),s=n(2932);n(67006),n(91088),n(65165);let d={};const c=function(t){const e=Object.entries(d).find((e=>e[1].label===t));if(e)return e[0]},p={draw:function(t,e,n,a){const p=(0,l.c)().class;d={},l.l.info("Rendering diagram "+t);const h=(0,l.c)().securityLevel;let f;"sandbox"===h&&(f=(0,r.Ys)("#i"+e));const g="sandbox"===h?(0,r.Ys)(f.nodes()[0].contentDocument.body):(0,r.Ys)("body"),u=g.select(`[id='${e}']`);var y;(y=u).append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),y.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),y.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),y.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),y.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),y.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),y.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),y.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z");const b=new i.k({multigraph:!0});b.setGraph({isMultiGraph:!0}),b.setDefaultEdgeLabel((function(){return{}}));const m=a.db.getClasses(),w=Object.keys(m);for(const t of w){const e=m[t],n=s.s.drawClass(u,e,p,a);d[n.id]=n,b.setNode(n.id,n),l.l.info("Org height: "+n.height)}a.db.getRelations().forEach((function(t){l.l.info("tjoho"+c(t.id1)+c(t.id2)+JSON.stringify(t)),b.setEdge(c(t.id1),c(t.id2),{relation:t},t.title||"DEFAULT")})),a.db.getNotes().forEach((function(t){l.l.debug(`Adding note: ${JSON.stringify(t)}`);const e=s.s.drawNote(u,t,p,a);d[e.id]=e,b.setNode(e.id,e),t.class&&t.class in m&&b.setEdge(t.id,c(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")})),(0,o.bK)(b),b.nodes().forEach((function(t){void 0!==t&&void 0!==b.node(t)&&(l.l.debug("Node "+t+": "+JSON.stringify(b.node(t))),g.select("#"+(a.db.lookUpDomId(t)||t)).attr("transform","translate("+(b.node(t).x-b.node(t).width/2)+","+(b.node(t).y-b.node(t).height/2)+" )"))})),b.edges().forEach((function(t){void 0!==t&&void 0!==b.edge(t)&&(l.l.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(b.edge(t))),s.s.drawEdge(u,b.edge(t),b.edge(t).relation,p,a))}));const k=u.node().getBBox(),x=k.width+40,v=k.height+40;(0,l.i)(u,v,x,p.useMaxWidth);const L=`${k.x-20} ${k.y-20} ${x} ${v}`;l.l.debug(`viewBox ${L}`),u.attr("viewBox",L)}},h={parser:a.p,db:a.d,renderer:p,styles:a.s,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,a.d.clear()}}},51554:(t,e,n)=>{n.r(e),n.d(e,{diagram:()=>f});var a=n(59100),r=n(27435),o=n(42521),i=n(89252),l=n(48065);n(67006),n(91088),n(65165),n(54746),n(50442);const s=t=>i.e.sanitizeText(t,(0,i.c)());let d={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const c=function(t,e,n,a,r){const o=Object.keys(t);i.l.info("keys:",o),i.l.info(t),o.filter((e=>t[e].parent==r)).forEach((function(n){var o,l;const d=t[n],c=d.cssClasses.join(" "),p=d.label??d.id,h={labelStyle:"",shape:"class_box",labelText:s(p),classData:d,rx:0,ry:0,class:c,style:"",id:d.id,domId:d.domId,tooltip:a.db.getTooltip(d.id,r)||"",haveCallback:d.haveCallback,link:d.link,width:"group"===d.type?500:void 0,type:d.type,padding:(null==(o=(0,i.c)().flowchart)?void 0:o.padding)??(null==(l=(0,i.c)().class)?void 0:l.padding)};e.setNode(d.id,h),r&&e.setParent(d.id,r),i.l.info("setNode",h)}))};function p(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const h={setConf:function(t){d={...d,...t}},draw:async function(t,e,n,a){i.l.info("Drawing class - ",e);const h=(0,i.c)().flowchart??(0,i.c)().class,f=(0,i.c)().securityLevel;i.l.info("config:",h);const g=(null==h?void 0:h.nodeSpacing)??50,u=(null==h?void 0:h.rankSpacing)??50,y=new o.k({multigraph:!0,compound:!0}).setGraph({rankdir:a.db.getDirection(),nodesep:g,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),b=a.db.getNamespaces(),m=a.db.getClasses(),w=a.db.getRelations(),k=a.db.getNotes();let x;i.l.info(w),function(t,e,n,a){const r=Object.keys(t);i.l.info("keys:",r),i.l.info(t),r.forEach((function(n){var r,o;const l=t[n],d={shape:"rect",id:l.id,domId:l.domId,labelText:s(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:(null==(r=(0,i.c)().flowchart)?void 0:r.padding)??(null==(o=(0,i.c)().class)?void 0:o.padding)};e.setNode(l.id,d),c(l.classes,e,0,a,l.id),i.l.info("setNode",d)}))}(b,y,0,a),c(m,y,0,a),function(t,e){const n=(0,i.c)().flowchart;let a=0;t.forEach((function(t){var o;a++;const l={classes:"relation",pattern:1==t.relation.lineType?"dashed":"solid",id:"id"+a,arrowhead:"arrow_open"===t.type?"none":"normal",startLabelRight:"none"===t.relationTitle1?"":t.relationTitle1,endLabelLeft:"none"===t.relationTitle2?"":t.relationTitle2,arrowTypeStart:p(t.relation.type1),arrowTypeEnd:p(t.relation.type2),style:"fill:none",labelStyle:"",curve:(0,i.o)(null==n?void 0:n.curve,r.c_6)};if(i.l.info(l,t),void 0!==t.style){const e=(0,i.k)(t.style);l.style=e.style,l.labelStyle=e.labelStyle}t.text=t.title,void 0===t.text?void 0!==t.style&&(l.arrowheadStyle="fill: #333"):(l.arrowheadStyle="fill: #333",l.labelpos="c",(null==(o=(0,i.c)().flowchart)?void 0:o.htmlLabels)??(0,i.c)().htmlLabels?(l.labelType="html",l.label='<span class="edgeLabel">'+t.text+"</span>"):(l.labelType="text",l.label=t.text.replace(i.e.lineBreakRegex,"\n"),void 0===t.style&&(l.style=l.style||"stroke: #333; stroke-width: 1.5px;fill:none"),l.labelStyle=l.labelStyle.replace("color:","fill:"))),e.setEdge(t.id1,t.id2,l,a)}))}(w,y),function(t,e,n,a){i.l.info(t),t.forEach((function(t,o){var l,c;const p=t,h=p.text,f={labelStyle:"",shape:"note",labelText:s(h),noteData:p,rx:0,ry:0,class:"",style:"",id:p.id,domId:p.id,tooltip:"",type:"note",padding:(null==(l=(0,i.c)().flowchart)?void 0:l.padding)??(null==(c=(0,i.c)().class)?void 0:c.padding)};if(e.setNode(p.id,f),i.l.info("setNode",f),!p.class||!(p.class in a))return;const g=n+o,u={id:`edgeNote${g}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,i.o)(d.curve,r.c_6)};e.setEdge(p.id,p.class,u,g)}))}(k,y,w.length+1,m),"sandbox"===f&&(x=(0,r.Ys)("#i"+e));const v="sandbox"===f?(0,r.Ys)(x.nodes()[0].contentDocument.body):(0,r.Ys)("body"),L=v.select(`[id="${e}"]`),E=v.select("#"+e+" g");if(await(0,l.r)(E,y,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),i.u.insertTitle(L,"classTitleText",(null==h?void 0:h.titleTopMargin)??5,a.db.getDiagramTitle()),(0,i.p)(y,L,null==h?void 0:h.diagramPadding,null==h?void 0:h.useMaxWidth),!(null==h?void 0:h.htmlLabels)){const t="sandbox"===f?x.nodes()[0].contentDocument:document,n=t.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const e of n){const n=e.getBBox(),a=t.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx",0),a.setAttribute("ry",0),a.setAttribute("width",n.width),a.setAttribute("height",n.height),e.insertBefore(a,e.firstChild)}}}},f={parser:a.p,db:a.d,renderer:h,styles:a.s,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,a.d.clear()}}},54503:(t,e,n)=>{n.d(e,{c:()=>g});var a=n(89252),r=n(77750),o=n(21826);function i(t){const e=function(t){const e=t.replace(/\n{2,}/g,"\n");return(0,o.Z)(e)}(t),{children:n}=(0,r.V)(e),a=[[]];let i=0;function l(t,e="normal"){"text"===t.type?t.value.split("\n").forEach(((t,n)=>{0!==n&&(i++,a.push([])),t.split(" ").forEach((t=>{t&&a[i].push({content:t,type:e})}))})):"strong"!==t.type&&"emphasis"!==t.type||t.children.forEach((e=>{l(e,t.type)}))}return n.forEach((t=>{"paragraph"===t.type&&t.children.forEach((t=>{l(t)}))})),a}function l(t,e){var n;return s(t,[],(n=e.content,Intl.Segmenter?[...(new Intl.Segmenter).segment(n)].map((t=>t.segment)):[...n]),e.type)}function s(t,e,n,a){if(0===n.length)return[{content:e.join(""),type:a},{content:"",type:a}];const[r,...o]=n,i=[...e,r];return t([{content:i.join(""),type:a}])?s(t,i,o,a):(0===e.length&&r&&(e.push(r),n.shift()),[{content:e.join(""),type:a},{content:n.join(""),type:a}])}function d(t,e){if(t.some((({content:t})=>t.includes("\n"))))throw new Error("splitLineToFitWidth does not support newlines in the line");return c(t,e)}function c(t,e,n=[],a=[]){if(0===t.length)return a.length>0&&n.push(a),n.length>0?n:[];let r="";" "===t[0].content&&(r=" ",t.shift());const o=t.shift()??{content:" ",type:"normal"},i=[...a];if(""!==r&&i.push({content:r,type:"normal"}),i.push(o),e(i))return c(t,e,n,i);if(a.length>0)n.push(a),t.unshift(o);else if(o.content){const[a,r]=l(e,o);n.push([a]),r.content&&t.unshift(r)}return c(t,e,n)}function p(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function h(t,e,n){const a=t.append("text"),r=p(a,1,e);f(r,n);const o=r.node().getComputedTextLength();return a.remove(),o}function f(t,e){t.text(""),e.forEach(((e,n)=>{const a=t.append("tspan").attr("font-style","emphasis"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===n?a.text(e.content):a.text(" "+e.content)}))}const g=(t,e="",{style:n="",isTitle:o=!1,classes:l="",useHtmlLabels:s=!0,isNode:c=!0,width:g=200,addSvgBackground:u=!1}={})=>{if(a.l.info("createText",e,n,o,l,s,c,u),s){const o=function(t){const{children:e}=(0,r.V)(t);return e.map((function t(e){return"text"===e.type?e.value.replace(/\n/g,"<br/>"):"strong"===e.type?`<strong>${e.children.map(t).join("")}</strong>`:"emphasis"===e.type?`<em>${e.children.map(t).join("")}</em>`:"paragraph"===e.type?`<p>${e.children.map(t).join("")}</p>`:`Unsupported markdown: ${e.type}`})).join("")}(e),i=function(t,e,n,a,r=!1){const o=t.append("foreignObject"),i=o.append("xhtml:div"),l=e.label,s=e.isNode?"nodeLabel":"edgeLabel";var d,c;i.html(`\n    <span class="${s} ${a}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+l+"</span>"),d=i,(c=e.labelStyle)&&d.attr("style",c),i.style("display","table-cell"),i.style("white-space","nowrap"),i.style("max-width",n+"px"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),r&&i.attr("class","labelBkg");let p=i.node().getBoundingClientRect();return p.width===n&&(i.style("display","table"),i.style("white-space","break-spaces"),i.style("width",n+"px"),p=i.node().getBoundingClientRect()),o.style("width",p.width),o.style("height",p.height),o.node()}(t,{isNode:c,label:(0,a.I)(o).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:n.replace("fill:","color:")},g,l,u);return i}{const n=function(t,e,n,a=!1){const r=e.append("g"),o=r.insert("rect").attr("class","background"),i=r.append("text").attr("y","-10.1");let l=0;for(const e of n){const n=e=>h(r,1.1,e)<=t,a=n(e)?[e]:d(e,n);for(const t of a)f(p(i,l,1.1),t),l++}if(a){const t=i.node().getBBox(),e=2;return o.attr("x",-e).attr("y",-e).attr("width",t.width+2*e).attr("height",t.height+2*e),r.node()}return i.node()}(g,t,i(e),u);return n}}}}]);